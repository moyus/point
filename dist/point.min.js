/*!
 * @moyu/pointcss
 * @version v2.0.0-alpha.13
 * @link https://github.com/moyus/pointcss
 * @author moyu <moyuboy@gmail.com> (https://moyu.io)
 * @license MIT
 */
!function(){function t(e,t){for(var i=e.length,r=0;r<i;r++)t(e[r],r,e)}function s(e){if("string"==typeof e)this.trigger=document.querySelector(e);else{if(!(e instanceof Element))throw Error("Invalid trigger selector or element!");this.trigger=e}if(!this.trigger)throw Error("Trigger element does not exist!");var t,i=this.trigger.dataset;function r(e){"toggle"===t.type?t.toggle(e):"enter"===t.type?t.enter(e):"leave"===t.type&&t.leave(e)}"leave"in i?(this.type="leave",this.service=i.leave?s.services[i.leave]:s.services.default):"enter"in i?(this.type="enter",this.service=i.enter?s.services[i.enter]:s.services.default):"toggle"in i&&(this.type="toggle",this.service=i.toggle?s.services[i.toggle]:s.services.default),i.target?this.target=document.getElementById(i.target):this.target=this.trigger,this.service&&this.target&&!this.trigger.__toggler__&&((t=this).trigger.addEventListener("click",r),this.listener=r,(this.trigger.__toggler__=this).service.init&&this.service.init.call(this))}s.prototype.destroy=function(){this.service.destroy&&this.service.destroy.call(this),this.trigger.removeEventListener("click",this.listener),this.trigger.__toggler__=null,this.trigger=null,this.target=null,this.listener=null},s.prototype.toggle=function(e){this.service.render.call(this,"toggle",e)},s.prototype.enter=function(e){this.service.render.call(this,"enter",e)},s.prototype.leave=function(e){this.service.render.call(this,"leave",e)},s.services={default:{render:function(e){"leave"===e?this.target.classList.remove("is-active"):"enter"===e?this.target.classList.add("is-active"):this.target.classList.toggle("is-active")}}},s.init=function(e){e?new s(e):(t(document.querySelectorAll("[data-toggle]"),function(e){new s(e)}),t(document.querySelectorAll("[data-enter]"),function(e){new s(e)}),t(document.querySelectorAll("[data-leave]"),function(e){new s(e)}))},(s.register=function(e){s.services[e.name]={init:e.init,render:e.render}})({name:"modal",render:function(e){"leave"===e?this.target.classList.add("hidden"):"enter"===e?this.target.classList.remove("hidden"):this.target.classList.toggle("hidden")}}),s.register({name:"dropdown",init:function(){var t=this;if(this.target===this.trigger){for(var e=this.trigger.parentNode.firstElementChild;e;){if(e!==this.trigger&&e.classList.contains("dropdown__content")){this.target=e;break}e=e.nextElementSibling}document.addEventListener("click",i),this.clickoutHandler=i}function i(e){t.target.contains(e.target)||t.trigger.contains(e.target)||t.leave()}},destroy:function(){document.removeEventListener("click",this.clickoutHandler)},render:function(e){"leave"===e?this.target.classList.add("hidden"):"enter"===e?this.target.classList.remove("hidden"):this.target.classList.toggle("hidden")}}),s.register({name:"menu",render:function(e,t){if(t)for(var i=t.target;i&&i!==t.currentTarget;){if(i.classList.contains("menu__link")){i.nextElementSibling&&i.nextElementSibling.classList.contains("menu__list")&&("leave"===e?i.parentNode.classList.remove("is-active"):"enter"===e?i.parentNode.classList.add("is-active"):i.parentNode.classList.toggle("is-active"));break}i=i.parentNode}}}),s.init(),window.Toggle=s}();